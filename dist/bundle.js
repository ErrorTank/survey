!function(e){function t(t){for(var r,c,s=t[0],i=t[1],u=t[2],f=0,m=[];f<s.length;f++)c=s[f],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&m.push(a[c][0]),a[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(l&&l(t);m.length;)m.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var i=n[s];0!==a[i]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={0:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=i;o.push([155,1]),n()}({155:function(e,t,n){n(156),e.exports=n(392)},392:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(53),c=n.n(o),s=(n(346),n(24)),i=n.n(s),u=n(393),l=n(394),f=n(395),m=n(396),p=n(4),d=n.n(p);function v(e){var t=e.className;return a.a.createElement("div",{className:d()("loading-inline"),onClick:function(e){e.stopPropagation()}},a.a.createElement("div",{className:"overlay row justify-content-center align-items-center"},a.a.createElement("i",{className:d()("far fa-spinner-third spin-icon spin",t)})))}var h=n(70),g=n.n(h),y=function(e){var t=e.url,n=e.type,r=e.data,a=e.headers,o=e.beforeSend,c=e.onError;return new Promise((function(e,s){var i={url:t,contentType:"application/json",type:n,async:!0,beforeSend:function(e){a&&Object.keys(a).length&&Object.keys(a).map((function(t){var n="function"==typeof a[t]?a[t]():a[t];e.setRequestHeader(t,n)})),o&&o(e)},success:function(t){e(t)},error:function(e,t,n){s(e.responseJSON),c&&c(e.responseJSON)}};r&&(i.data=JSON.stringify(r)),$.ajax(i)}))},b=n(150),E=n.n(b),N=function(e){var t=e.hostURL,n=e.beforeSend,r=e.onErrors,a=void 0===r?{}:r,o={},c=function(e){if(e&&e.hasOwnProperty("message")){var t=e.message;a.hasOwnProperty(t)&&a[t]()}a.hasOwnProperty("default")&&a.default()},s=function(e){return function(r,a){return y({url:t+r,data:a,type:e,beforeSend:n,headers:o,onError:c})}},i=function(e){return function(r){return y({url:t+r,type:e,beforeSend:n,headers:o,onError:c})}};return{addHeader:function(e,t){o[e]=t},get:i("GET"),post:s("POST"),put:s("PUT"),delete:i("DELETE"),downloadStream:function(e){window.open(t+e)},postMultipart:function(e,r,a){var c=a.onLoad,s=a.onProgress,i=a.onError,u=a.fileKey,l=new FormData;return E()(r,(function(e,t){if(null!=e)if(Array.isArray(e))for(var n=0;n<e.length;n++)l.append(t,t!==u&&"object"===g()(e[n])?JSON.stringify(e[n]):e[n]);else l.append(t,t!==u&&"object"===g()(e)?JSON.stringify(e):e)})),new Promise((function(r,a){$.ajax({url:t+e,type:"POST",async:!0,xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){s&&s(e)})),e.upload.addEventListener("load",(function(e){c&&c(e)})),e.upload.addEventListener("error",(function(e){i&&i(e)})),e},beforeSend:function(e){o&&Object.keys(o).length&&Object.keys(o).map((function(t){var n="function"==typeof o[t]?o[t]():o[t];e.setRequestHeader(t,n)})),n&&n(e)},data:l,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(e){r(e)},error:function(e,t,n){a({rsp:e.responseJSON},t,n)}})}))}}},S={hostURL:"".concat("https://survey-spa.herokuapp.com","/api")},O={hostURL:"".concat("https://survey-spa.herokuapp.com","/api")},w=N(S),k=N(O),j=function(e){return k.post("/login",e)},x=function(e){return w.post("/submit-survey",e)},P=n(72),I=n.n(P),D=n(71),M=n.n(D),C=n(73),L=n.n(C),R=new function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage;M()(this,e),L()(this,"engine",null),L()(this,"get",(function(e){var n,r=t.engine.getItem(e);if(null==r)return null;try{n=JSON.parse(r)}catch(e){console.log(e),n=null}return n})),L()(this,"set",(function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==e)t.engine.removeItem(n);else try{t.engine.setItem(n,JSON.stringify(e),r)}catch(e){console.log(e)}})),this.engine=n}({getItem:I.a.get,setItem:I.a.set,removeItem:I.a.remove}),T=function(){return w.addHeader("Authorization",(function(){var e=R.get("token");return e?"Bearer ".concat(e):null})),R.set(null,"token"),Promise.resolve()};var J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=e,r=[];return{getState:function(){return n},setState:function(e){var a=n;return n=t(e),Promise.all(r.map((function(e){return e(n,a)})))},onChange:function(e){return r.push(e),function(){var t=r.indexOf(e);r.splice(t,1)}}}}(),G=n(400),K=n(397),U=n(398),_=n(399),H=n(151),A=n.n(H),q=n(152),B=n.n(q),V=n(153),Y=n.n(V),F=n(105),X=n.n(F);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X()(e);if(t){var a=X()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Y()(this,n)}}var W=function(e){B()(n,e);var t=z(n);function n(e){var r;return M()(this,n),(r=t.call(this,e)).state={rating:e.rating},r}return A()(n,[{key:"componentWillReceiveProps",value:function(e,t){0===e.rating&&this.setState({rating:0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.editable,o=t.onChange,c=t.onMouseOverStars,s=t.onMouseLeaveStars,i=this.state.rating,u=void 0===i?0:i;return a.a.createElement("div",{className:d()("stars-outer",n,{editable:r}),onMouseLeave:function(){r&&(e.setState({rating:e.props.rating||0}),s())}},[1,2,3,4,5].map((function(t){return a.a.createElement("span",{className:"star",key:t,onMouseEnter:function(){r&&(e.setState({rating:t}),c(t))},onClick:function(){return r&&o(t)}})})),a.a.createElement("div",{className:"stars-inner",style:{width:u/5*100+"%"}},[1,2,3,4,5].map((function(e){return a.a.createElement("span",{className:"star",key:e})}))))}}]),n}(a.a.Component),Z={LOGIN:{component:function(e){var t=e.setNewMode,n=Object(r.useState)(""),o=i()(n,2),c=o[0],s=o[1],p=Object(r.useState)(!1),d=i()(p,2),h=d[0],g=d[1],y=function(){g(!0),j({customerID:c}).then((function(e){R.set(e.token,"token",{expires:7}),J.setState({customerID:e.customerID}).then((function(){return t("SURVEY")}))}))};return a.a.createElement("div",{className:"login-form"},a.a.createElement("div",{className:"white-box"},a.a.createElement("div",{className:"box-header"},"Khảo sát khách hàng"),a.a.createElement("div",{className:"box-body"},a.a.createElement(u.a,null,a.a.createElement(l.a,{for:"customerID"},"Mã khách hàng"),a.a.createElement(f.a,{type:"text",name:"customerID",id:"customerID",placeholder:"VD: ABCDXYZ...",value:c,onKeyDown:function(e){13===e.keyCode&&c&&!h&&y()},onChange:function(e){return s(e.target.value)}}))),a.a.createElement("div",{className:"box-footer"},a.a.createElement(m.a,{color:"primary",block:!0,disabled:h||!c,onClick:y},"Tiếp tục",h&&a.a.createElement(v,null)))))}},SURVEY:{component:function(e){var t=e.setNewMode,n=Object(r.useState)(5),o=i()(n,2),c=o[0],s=o[1],u=Object(r.useState)(""),l=i()(u,2),p=l[0],v=l[1],h=Object(r.useState)(!1),g=i()(h,2),y=g[0],b=g[1],E=Object(r.useState)(5),N=i()(E,2),S=N[0],O=N[1],w=J.getState().customerID,k=Object(r.useState)(!1),j=i()(k,2),P=j[0],I=j[1],D=function(){I(!P),J.setState(null),R.set(null,"token"),t("LOGIN")};return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"survey-form"},a.a.createElement("div",{className:"white-box"},a.a.createElement("div",{className:"box-header"},"Khảo sát khách hàng"),a.a.createElement("div",{className:"box-body"},a.a.createElement("div",{className:"survey-row"},a.a.createElement("div",{className:"survey-label"},"Khách hàng:"),a.a.createElement("div",{className:"survey-value"},w)),a.a.createElement("div",{className:"survey-row"},a.a.createElement("div",{className:"survey-label"},"Đánh giá của bạn: ",a.a.createElement("span",{className:d()("rating-count",{low:S<=2,avg:S>2&&S<=4,high:S>4})},S,"/5")),a.a.createElement("div",{className:"survey-rating"},a.a.createElement(W,{rating:c,editable:!0,onChange:function(e){return s(e)},onMouseOverStars:function(e){return O(e)},onMouseLeaveStars:function(){return O(c)}}))),a.a.createElement("div",{className:"survey-row"},a.a.createElement("div",{className:"survey-label"},"Đóng góp ý kiến"),a.a.createElement("div",{className:"survey-text"},a.a.createElement(f.a,{type:"textarea",name:"text",placeholder:"Nhập ý kiến của bạn...",value:p,onChange:function(e){return v(e.target.value)}})))),a.a.createElement("div",{className:"box-footer"},a.a.createElement(m.a,{color:"primary",block:!0,disabled:y,onClick:function(){b(!0),x({customerID:w,rating:c,text:p}).then((function(){b(!1),O(5),s(5),v(""),I(!0)}))}},y?"Đang gửi...":"Gửi đánh giá"," ",a.a.createElement("i",{className:"fab fa-telegram-plane"}))))),a.a.createElement(G.a,{isOpen:P,toggle:D,className:"success-modal"},a.a.createElement(K.a,{toggle:D},"Gửi thành công"),a.a.createElement(U.a,null,a.a.createElement("div",{className:"success-text"},a.a.createElement("i",{className:"success-icon fas fa-check-circle"}),"  ",a.a.createElement("span",null,"Cảm ơn bạn đã tham gia đánh giá chất lượng dịch vụ của chúng tôi!"))),a.a.createElement(_.a,null,a.a.createElement(m.a,{color:"primary",onClick:D},"Kết thúc"))))}}},Q=function(){var e=Object(r.useState)(Z.LOGIN),t=i()(e,2),n=t[0],o=t[1],c=n.component,s=Object(r.useCallback)((function(e){o(Z[e])}),[]);return a.a.createElement(c,{setNewMode:s})};T().then((function(){c.a.render(a.a.createElement(Q,null),document.getElementById("app"))}))}});