(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,n){n(157),e.exports=n(393)},393:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(53),c=n.n(o),s=(n(347),n(24)),i=n.n(s),u=n(394),l=n(395),m=n(396),f=n(397),d=n(4),p=n.n(d);function v(e){var t=e.className;return r.a.createElement("div",{className:p()("loading-inline"),onClick:function(e){e.stopPropagation()}},r.a.createElement("div",{className:"overlay row justify-content-center align-items-center"},r.a.createElement("i",{className:p()("far fa-spinner-third spin-icon spin",t)})))}var h=n(70),g=n.n(h),y=function(e){var t=e.url,n=e.type,a=e.data,r=e.headers,o=e.beforeSend,c=e.onError;return new Promise((function(e,s){var i={url:t,contentType:"application/json",type:n,async:!0,beforeSend:function(e){r&&Object.keys(r).length&&Object.keys(r).map((function(t){var n="function"==typeof r[t]?r[t]():r[t];e.setRequestHeader(t,n)})),o&&o(e)},success:function(t){e(t)},error:function(e,t,n){s(e.responseJSON),c&&c(e.responseJSON)}};a&&(i.data=JSON.stringify(a)),$.ajax(i)}))},E=n(151),b=n.n(E),N=function(e){var t=e.hostURL,n=e.beforeSend,a=e.onErrors,r=void 0===a?{}:a,o={},c=function(e){if(e&&e.hasOwnProperty("message")){var t=e.message;r.hasOwnProperty(t)&&r[t]()}r.hasOwnProperty("default")&&r.default()},s=function(e){return function(a,r){return y({url:t+a,data:r,type:e,beforeSend:n,headers:o,onError:c})}},i=function(e){return function(a){return y({url:t+a,type:e,beforeSend:n,headers:o,onError:c})}};return{addHeader:function(e,t){o[e]=t},get:i("GET"),post:s("POST"),put:s("PUT"),delete:i("DELETE"),downloadStream:function(e){window.open(t+e)},postMultipart:function(e,a,r){var c=r.onLoad,s=r.onProgress,i=r.onError,u=r.fileKey,l=new FormData;return b()(a,(function(e,t){if(null!=e)if(Array.isArray(e))for(var n=0;n<e.length;n++)l.append(t,t!==u&&"object"===g()(e[n])?JSON.stringify(e[n]):e[n]);else l.append(t,t!==u&&"object"===g()(e)?JSON.stringify(e):e)})),new Promise((function(a,r){$.ajax({url:t+e,type:"POST",async:!0,xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){s&&s(e)})),e.upload.addEventListener("load",(function(e){c&&c(e)})),e.upload.addEventListener("error",(function(e){i&&i(e)})),e},beforeSend:function(e){o&&Object.keys(o).length&&Object.keys(o).map((function(t){var n="function"==typeof o[t]?o[t]():o[t];e.setRequestHeader(t,n)})),n&&n(e)},data:l,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(e){a(e)},error:function(e,t,n){r({rsp:e.responseJSON},t,n)}})}))}}},S={hostURL:"".concat("https://survey-spa.herokuapp.com","/api")},O={hostURL:"".concat("https://survey-spa.herokuapp.com","/api")},k=N(S),w=N(O),x=function(e){return w.post("/login",e)},j=function(e){return k.post("/submit-survey",e)},I=n(73),D=n.n(I),C=n(71),L=n.n(C),P=n(74),R=n.n(P),M=new function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage;L()(this,e),R()(this,"engine",null),R()(this,"get",(function(e){var n,a=t.engine.getItem(e);if(null==a)return null;try{n=JSON.parse(a)}catch(e){console.log(e),n=null}return n})),R()(this,"set",(function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==e)t.engine.removeItem(n);else try{t.engine.setItem(n,JSON.stringify(e),a)}catch(e){console.log(e)}})),this.engine=n}({getItem:D.a.get,setItem:D.a.set,removeItem:D.a.remove}),J=function(){return k.addHeader("Authorization",(function(){var e=M.get("token");return e?"Bearer ".concat(e):null})),M.set(null,"token"),Promise.resolve()};var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=e,a=[];return{getState:function(){return n},setState:function(e){var r=n;return n=t(e),Promise.all(a.map((function(e){return e(n,r)})))},onChange:function(e){return a.push(e),function(){var t=a.indexOf(e);a.splice(t,1)}}}}(),G=n(401),K=n(398),U=n(399),H=n(400),A=n(152),q=n.n(A),B=n(153),V=n.n(B),Y=n(154),F=n.n(Y),X=n(106),z=n.n(X);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=z()(e);if(t){var r=z()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return F()(this,n)}}var Z=function(e){V()(n,e);var t=W(n);function n(e){var a;return L()(this,n),(a=t.call(this,e)).state={rating:e.rating},a}return q()(n,[{key:"componentWillReceiveProps",value:function(e,t){0===e.rating&&this.setState({rating:0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.editable,o=t.onChange,c=t.onMouseOverStars,s=t.onMouseLeaveStars,i=this.state.rating,u=void 0===i?0:i;return r.a.createElement("div",{className:p()("stars-outer",n,{editable:a}),onMouseLeave:function(){a&&(e.setState({rating:e.props.rating||0}),s())}},[1,2,3,4,5].map((function(t){return r.a.createElement("span",{className:"star",key:t,onMouseEnter:function(){a&&(e.setState({rating:t}),c(t))},onClick:function(){return a&&o(t)}})})),r.a.createElement("div",{className:"stars-inner",style:{width:u/5*100+"%"}},[1,2,3,4,5].map((function(e){return r.a.createElement("span",{className:"star",key:e})}))))}}]),n}(r.a.Component),Q={LOGIN:{component:function(e){var t=e.setNewMode,n=Object(a.useState)(""),o=i()(n,2),c=o[0],s=o[1],d=Object(a.useState)(!1),p=i()(d,2),h=p[0],g=p[1],y=function(){g(!0),x({customerID:c}).then((function(e){M.set(e.token,"token",{expires:7}),T.setState({customerID:e.customerID}).then((function(){return t("SURVEY")}))}))};return r.a.createElement("div",{className:"login-form"},r.a.createElement("div",{className:"white-box"},r.a.createElement("div",{className:"box-header"},"Khảo sát khách hàng"),r.a.createElement("div",{className:"box-body"},r.a.createElement(u.a,null,r.a.createElement(l.a,{for:"customerID"},"Mã khách hàng"),r.a.createElement(m.a,{type:"text",name:"customerID",id:"customerID",placeholder:"VD: ABCDXYZ...",value:c,onKeyDown:function(e){13===e.keyCode&&c&&!h&&y()},onChange:function(e){return s(e.target.value)}}))),r.a.createElement("div",{className:"box-footer"},r.a.createElement(f.a,{color:"primary",block:!0,disabled:h||!c,onClick:y},"Tiếp tục",h&&r.a.createElement(v,null)))))}},SURVEY:{component:function(e){var t=e.setNewMode,n=Object(a.useState)(5),o=i()(n,2),c=o[0],s=o[1],u=Object(a.useState)(""),l=i()(u,2),d=l[0],v=l[1],h=Object(a.useState)(!1),g=i()(h,2),y=g[0],E=g[1],b=Object(a.useState)(5),N=i()(b,2),S=N[0],O=N[1],k=T.getState().customerID,w=Object(a.useState)(!1),x=i()(w,2),I=x[0],D=x[1],C=function(){D(!I),T.setState(null),M.set(null,"token"),t("LOGIN")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"survey-form"},r.a.createElement("div",{className:"white-box"},r.a.createElement("div",{className:"box-header"},"Khảo sát khách hàng"),r.a.createElement("div",{className:"box-body"},r.a.createElement("div",{className:"survey-row"},r.a.createElement("div",{className:"survey-label"},"Khách hàng:"),r.a.createElement("div",{className:"survey-value"},k)),r.a.createElement("div",{className:"survey-row"},r.a.createElement("div",{className:"survey-label"},"Đánh giá của bạn: ",r.a.createElement("span",{className:p()("rating-count",{low:S<=2,avg:S>2&&S<=4,high:S>4})},S,"/5")),r.a.createElement("div",{className:"survey-rating"},r.a.createElement(Z,{rating:c,editable:!0,onChange:function(e){return s(e)},onMouseOverStars:function(e){return O(e)},onMouseLeaveStars:function(){return O(c)}}))),r.a.createElement("div",{className:"survey-row"},r.a.createElement("div",{className:"survey-label"},"Đóng góp ý kiến"),r.a.createElement("div",{className:"survey-text"},r.a.createElement(m.a,{type:"textarea",name:"text",placeholder:"Nhập ý kiến của bạn...",value:d,onChange:function(e){return v(e.target.value)}})))),r.a.createElement("div",{className:"box-footer"},r.a.createElement(f.a,{color:"primary",block:!0,disabled:y,onClick:function(){E(!0),j({customerID:k,rating:c,text:d}).then((function(){E(!1),O(5),s(5),v(""),D(!0)}))}},y?"Đang gửi...":"Gửi đánh giá"," ",r.a.createElement("i",{className:"fab fa-telegram-plane"}))))),r.a.createElement(G.a,{isOpen:I,toggle:C,className:"success-modal"},r.a.createElement(K.a,{toggle:C},"Gửi thành công"),r.a.createElement(U.a,null,r.a.createElement("div",{className:"success-text"},r.a.createElement("i",{className:"success-icon fas fa-check-circle"}),"  ",r.a.createElement("span",null,"Cảm ơn bạn đã tham gia đánh giá chất lượng dịch vụ của chúng tôi!"))),r.a.createElement(H.a,null,r.a.createElement(f.a,{color:"primary",onClick:C},"Kết thúc"))))}}},_=function(){var e=Object(a.useState)(Q.LOGIN),t=i()(e,2),n=t[0],o=t[1],c=n.component,s=Object(a.useCallback)((function(e){o(Q[e])}),[]);return r.a.createElement(c,{setNewMode:s})};J().then((function(){c.a.render(r.a.createElement(_,null),document.getElementById("app"))}))}},[[156,19,1,7,14,13,5,9,2,11,10,16,17,18,3,4,6,8,12,15]]]);