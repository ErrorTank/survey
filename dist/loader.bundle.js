(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{183:function(e,n,t){"use strict";t.d(n,"b",(function(){return j})),t.d(n,"a",(function(){return A}));var r=t(0),a=t.n(r),o=t(570),u=t(45),i=t(105),c=t.n(i),s=t(126),l=t.n(s),f=t(74),d=t(48),p=t(87),h=function(e){var n=e.render,t=e.component,r=l()(e,["render","component"]);return a.a.createElement(o.b,c()({},r,{render:function(e){return f.a.getAuthen()?a.a.createElement(o.a,{to:{pathname:p.a[d.a.getState().role].defaultPath}}):n?n(e):a.a.createElement(t,e)}}))},m=t(244),g=t(572),v=t(242),y=t.n(v),E=t(243),S=t.n(E),b=function(e){var n=e.render,t=e.component,r=e.roles,u=l()(e,["render","component","roles"]);return a.a.createElement(o.b,c()({},u,{render:function(e){return f.a.getAuthen()?r.includes(d.a.getState().role)?n?n(e):a.a.createElement(t,e):a.a.createElement(o.a,{to:{pathname:p.a[d.a.getState().role].defaultPath}}):a.a.createElement(o.a,{to:{pathname:"/login"}})}}))};Promise.all([t.e(0),t.e(4),t.e(5),t.e(11),t.e(27)]).then(t.bind(null,846));var P=Object(m.a)({palette:{primary:{main:y.a[700]},secondary:S.a}}),w=a.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(2),t.e(7)]).then(t.bind(null,843))})),O=a.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(2),t.e(26)]).then(t.bind(null,844))})),k=a.a.lazy((function(){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(2),t.e(25)]).then(t.bind(null,845))})),j=Object(u.a)(),A=function(){return a.a.createElement(g.a,{theme:P},a.a.createElement(o.c,{history:j},a.a.createElement(r.Suspense,{fallback:null},a.a.createElement(o.d,null,a.a.createElement(b,{path:"/",exact:!0,render:function(e){return a.a.createElement(o.a,{to:{pathname:p.a[d.a.getState().role].defaultPath}})},roles:[0]}),a.a.createElement(b,{path:"/survey",exact:!0,render:function(e){return a.a.createElement(k,e)},roles:[2]}),a.a.createElement(b,{path:"/surveys",exact:!0,render:function(e){return a.a.createElement(O,e)},roles:[0,1]}),a.a.createElement(h,{path:"/login",exact:!0,render:function(e){return a.a.createElement(w,e)}})))))}},227:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r=t(95),a={login:function(e){return r.b.post("/auth/login",e)},auth:function(){return r.a.get("/auth/check-auth")}}},303:function(e,n,t){t(304),e.exports=t(530)},48:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},t=e,r=[];return{getState:function(){return t},setState:function(e){var a=t;return t=n(e),Promise.all(r.map((function(e){return e(t,a)})))},onChange:function(e){return r.push(e),function(){var n=r.indexOf(e);r.splice(n,1)}}}}()},530:function(e,n,t){"use strict";t.r(n),t.d(n,"registerServiceWorker",(function(){return l}));var r=t(0),a=t.n(r),o=t(14),u=t.n(o),i=t(183),c=t(95),s=t(74),l=function(){if("serviceWorker"in navigator){return navigator.serviceWorker.register("./sw.js").then((function(){console.log("Service worker registered!")})).catch((function(e){console.log(e)}))}return console.log("Service worker is not supported!"),Promise.resolve()};(function(){return c.a.addHeader("Authorization",(function(){var e=s.a.getAuthen();return e?"Bearer "+e:null})),s.a.loadAuthen().then((function(e){return Promise.resolve()})).catch((function(e){return Promise.resolve()}))})().then((function(){u.a.render(a.a.createElement(i.a,null),document.getElementById("app"))}))},74:function(e,n,t){"use strict";t.d(n,"a",(function(){return g}));var r,a,o,u=t(185),i=t.n(u),c=t(112),s=t.n(c),l=function e(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage;i()(this,e),s()(this,"engine",null),s()(this,"get",(function(e){var t,r=n.engine.getItem(e);if(null==r)return null;try{t=JSON.parse(r)}catch(e){console.log(e),t=null}return t})),s()(this,"set",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==e)n.engine.removeItem(t);else try{n.engine.setItem(t,JSON.stringify(e),r)}catch(e){console.log(e)}})),this.engine=t},f=t(138),d=t.n(f),p=t(227),h=t(48),m={getItem:d.a.get,setItem:d.a.set,removeItem:d.a.remove},g=(r=new l(m),a=[],{onChange:function(e){return a.push(e),function(){var n=a.indexOf(e);a.splice(n,1)}},clearAuthen:function(){o(null)},loadAuthen:function(){return new Promise((function(e,n){r.get("token")?p.a.auth().then((function(t){t?(t._id||o(null),h.a.setState(t).then((function(){return e()}))):n()})).catch((function(e){o(null)})):n()}))},getAuthen:function(){return r.get("token")},setAuthen:o=function(e,n){r.set(e,"token",n),Promise.all(a.map((function(n){return n(e)})))}})},87:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r={0:{defaultPath:"/surveys"},1:{defaultPath:"/surveys"},2:{defaultPath:"/survey"}}},95:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return l}));var r=t(127),a=t.n(r),o=function(e){var n=e.url,t=e.type,r=e.data,a=e.headers,o=e.beforeSend,u=e.onError;return new Promise((function(e,i){var c={url:n,contentType:"application/json",type:t,async:!0,beforeSend:function(e){a&&Object.keys(a).length&&Object.keys(a).map((function(n){var t="function"==typeof a[n]?a[n]():a[n];e.setRequestHeader(n,t)})),o&&o(e)},success:function(n){e(n)},error:function(e,n,t){i(e.responseJSON),u&&u(e.responseJSON)}};r&&(c.data=JSON.stringify(r)),$.ajax(c)}))},u=t(236),i=t.n(u),c=function(e){var n=e.hostURL,t=e.beforeSend,r=e.onErrors,u=void 0===r?{}:r,c={},s=function(e){if(e&&e.hasOwnProperty("message")){var n=e.message;u.hasOwnProperty(n)&&u[n]()}u.hasOwnProperty("default")&&u.default()},l=function(e){return function(r,a){return o({url:n+r,data:a,type:e,beforeSend:t,headers:c,onError:s})}},f=function(e){return function(r){return o({url:n+r,type:e,beforeSend:t,headers:c,onError:s})}};return{addHeader:function(e,n){c[e]=n},get:f("GET"),post:l("POST"),put:l("PUT"),delete:f("DELETE"),downloadStream:function(e){window.open(n+e)},postMultipart:function(e,r,o){var u=o.onLoad,s=o.onProgress,l=o.onError,f=o.fileKey,d=new FormData;return i()(r,(function(e,n){if(null!=e)if(Array.isArray(e))for(var t=0;t<e.length;t++)d.append(n,n!==f&&"object"===a()(e[t])?JSON.stringify(e[t]):e[t]);else d.append(n,n!==f&&"object"===a()(e)?JSON.stringify(e):e)})),new Promise((function(r,a){$.ajax({url:n+e,type:"POST",async:!0,xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){s&&s(e)})),e.upload.addEventListener("load",(function(e){u&&u(e)})),e.upload.addEventListener("error",(function(e){l&&l(e)})),e},beforeSend:function(e){c&&Object.keys(c).length&&Object.keys(c).map((function(n){var t="function"==typeof c[n]?c[n]():c[n];e.setRequestHeader(n,t)})),t&&t(e)},data:d,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(e){r(e)},error:function(e,n,t){a({rsp:e.responseJSON},n,t)}})}))}}},s=c({hostURL:"https://survey-spa.herokuapp.com/api"}),l=c({hostURL:"https://survey-spa.herokuapp.com/api"})}},[[303,24,0,1,4,5,14,18,16,17,15,21,8,9,10,12,13,19,20,22,23]]]);