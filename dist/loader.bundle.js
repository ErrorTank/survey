(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{110:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={0:{defaultPath:"/surveys"},1:{defaultPath:"/surveys"},2:{defaultPath:"/survey"}}},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=function(e){var t=e.url,n=e.type,r=e.data,o=e.headers,a=e.beforeSend,u=e.onError;return new Promise((function(e,i){var c={url:t,contentType:"application/json",type:n,async:!0,beforeSend:function(e){o&&Object.keys(o).length&&Object.keys(o).map((function(t){var n="function"==typeof o[t]?o[t]():o[t];e.setRequestHeader(t,n)})),a&&a(e)},success:function(t){e(t)},error:function(e,t,n){i(e.responseJSON),u&&u(e.responseJSON)}};r&&(c.data=JSON.stringify(r)),$.ajax(c)}))},o=n(291),a=n.n(o);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(e){var t=e.hostURL,n=e.beforeSend,o=e.onErrors,i=void 0===o?{}:o,c={},s=function(e){if(e&&e.hasOwnProperty("message")){var t=e.message;i.hasOwnProperty(t)&&i[t]()}i.hasOwnProperty("default")&&i.default()},l=function(e){return function(o,a){return r({url:t+o,data:a,type:e,beforeSend:n,headers:c,onError:s})}},f=function(e){return function(o){return r({url:t+o,type:e,beforeSend:n,headers:c,onError:s})}};return{addHeader:function(e,t){c[e]=t},get:f("GET"),post:l("POST"),put:l("PUT"),delete:f("DELETE"),downloadStream:function(e){window.open(t+e)},postMultipart:function(e,r,o){var i=o.onLoad,s=o.onProgress,l=o.onError,f=o.fileKey,h=new FormData;return a()(r,(function(e,t){if(null!=e)if(Array.isArray(e))for(var n=0;n<e.length;n++)h.append(t,t!==f&&"object"===u(e[n])?JSON.stringify(e[n]):e[n]);else h.append(t,t!==f&&"object"===u(e)?JSON.stringify(e):e)})),new Promise((function(r,o){$.ajax({url:t+e,type:"POST",async:!0,xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(e){s&&s(e)})),e.upload.addEventListener("load",(function(e){i&&i(e)})),e.upload.addEventListener("error",(function(e){l&&l(e)})),e},beforeSend:function(e){c&&Object.keys(c).length&&Object.keys(c).map((function(t){var n="function"==typeof c[t]?c[t]():c[t];e.setRequestHeader(t,n)})),n&&n(e)},data:h,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(e){r(e)},error:function(e,t,n){o({rsp:e.responseJSON},t,n)}})}))}}},c=i({hostURL:"https://survey-spa.herokuapp.com/api"}),s=i({hostURL:"https://survey-spa.herokuapp.com/api"})},238:function(e,t,n){"use strict";n.d(t,"b",(function(){return J})),n.d(t,"a",(function(){return L}));var r=n(0),o=n.n(r),a=n(617),u=n(58),i=n(94),c=n(61),s=n(110);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var h=function(e){var t=e.render,n=e.component,r=f(e,["render","component"]);return o.a.createElement(a.b,l({},r,{render:function(e){return i.a.getAuthen()?o.a.createElement(a.a,{to:{pathname:s.a[c.a.getState().role].defaultPath}}):t?t(e):o.a.createElement(n,e)}}))},p=n(16),d=n(298),m=n.n(d),v=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.trim().toLowerCase())},g=function(e){return!1===/\D/gi.test(e.trim())};p.a(p.d,"isTax",(function(e){return this.test("isTax",e,(function(e){return!e||(14===e.length||10===e.length)}))})),p.a(p.d,"notHaveNumber",(function(e){return this.test("notHaveNumber",e,(function(e){return!1===/\d/gi.test(e)}))})),p.a(p.c,"notEmpty",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"no data";return this.test("notEmpty",e,(function(e){return!m()(e)}))})),p.a(p.d,"isPhone",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"no data";return this.test("isPhone",e,(function(e){return g(e)}))})),p.a(p.d,"isPhoneOrEmail",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"no data";return this.test("isPhoneOrEmail",e,(function(e){return g(e)||v(e)}))})),p.a(p.d,"onlyWord",(function(e){return this.test("onlyWord",e,(function(e){return!0===/^[a-zA-Z_ÀÁÂÃÈÉÊÌÍÒÓÔÕÙÚĂĐĨŨƠàáâãèéêìíòóôõùúăđĩũơƯĂẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼỀỀỂưăạảấầẩẫậắằẳẵặẹẻẽềềểỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪễệỉịọỏốồổỗộớờởỡợụủứừỬỮỰỲỴÝỶỸửữựỳỵỷỹ\\s]+$/gi.test(e.replace(/\s/gi,""))}))})),p.a(p.d,"noSpecialChar",(function(e){return this.test("onlyWord",e,(function(e){return!1===/\W/gi.test(e.replace(/\s/gi,""))}))})),p.a(p.d,"haveChar",(function(e){return this.test("haveChar",e,(function(e){return!0===/[a-z]/gi.test(e)}))})),p.a(p.d,"haveNumber",(function(e){return this.test("haveNumber",e,(function(e){return!0===/\d/gi.test(e)}))})),p.a(p.d,"equalTo",(function(e,t){return this.test({name:"equalTo",exclusive:!1,message:t,params:{reference:e.path},test:function(t){return t===this.resolve(e)}})})),p.a(p.d,"notEqualTo",(function(e,t){return this.test({name:"notEqualTo",exclusive:!1,message:t,params:{reference:e.path},test:function(t){return t!==this.resolve(e)}})})),p.a(p.b,"notReach",(function(e){return this.test({name:"notReach",exclusive:!1,message:e,test:function(e){var t=this.parent,n=new Date(e).getTime();return new Date(t.to).getTime()-n>0}})}));var y=n(304),b=n(619),O=n(302),E=n.n(O),S=n(303),w=n.n(S);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var k=function(e){var t=e.render,n=e.component,r=e.roles,u=j(e,["render","component","roles"]);return o.a.createElement(a.b,P({},u,{render:function(e){return i.a.getAuthen()?r.includes(c.a.getState().role)?t?t(e):o.a.createElement(n,e):o.a.createElement(a.a,{to:{pathname:s.a[c.a.getState().role].defaultPath}}):o.a.createElement(a.a,{to:{pathname:"/login"}})}}))},x=Object(y.a)({palette:{primary:{main:E.a[700]},secondary:w.a}}),T=o.a.lazy((function(){return Promise.all([n.e(1),n.e(0),n.e(3),n.e(2),n.e(5)]).then(n.bind(null,827))})),A=o.a.lazy((function(){return Promise.all([n.e(1),n.e(0),n.e(3),n.e(2),n.e(30)]).then(n.bind(null,828))})),N=o.a.lazy((function(){return Promise.all([n.e(1),n.e(0),n.e(3),n.e(2),n.e(29)]).then(n.bind(null,829))})),J=Object(u.a)(),L=function(){return o.a.createElement(b.a,{theme:x},o.a.createElement(a.c,{history:J},o.a.createElement(r.Suspense,{fallback:null},o.a.createElement(a.d,null,o.a.createElement(k,{path:"/",exact:!0,render:function(e){return o.a.createElement(a.a,{to:{pathname:s.a[c.a.getState().role].defaultPath}})},roles:[0]}),o.a.createElement(k,{path:"/survey",exact:!0,render:function(e){return o.a.createElement(N,e)},roles:[2]}),o.a.createElement(k,{path:"/surveys",exact:!0,render:function(e){return o.a.createElement(A,e)},roles:[0,1]}),o.a.createElement(h,{path:"/login",exact:!0,render:function(e){return o.a.createElement(T,e)}})))))}},280:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(128),o={login:function(e){return r.b.post("/auth/login",e)},auth:function(){return r.a.get("/auth/check-auth")}}},359:function(e,t,n){n(360),e.exports=n(584)},584:function(e,t,n){"use strict";n.r(t),n.d(t,"registerServiceWorker",(function(){return l}));var r=n(0),o=n.n(r),a=n(14),u=n.n(a),i=n(238),c=n(128),s=n(94),l=function(){if("serviceWorker"in navigator){return navigator.serviceWorker.register("./sw.js").then((function(){console.log("Service worker registered!")})).catch((function(e){console.log(e)}))}return console.log("Service worker is not supported!"),Promise.resolve()};(function(){return c.a.addHeader("Authorization",(function(){var e=s.a.getAuthen();return e?"Bearer "+e:null})),s.a.loadAuthen().then((function(e){return Promise.resolve()})).catch((function(e){return Promise.resolve()}))})().then((function(){u.a.render(o.a.createElement(i.a,null),document.getElementById("app"))}))},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=e,r=[];return{getState:function(){return n},setState:function(e){var o=n;return n=t(e),Promise.all(r.map((function(e){return e(n,o)})))},onChange:function(e){return r.push(e),function(){var t=r.indexOf(e);r.splice(t,1)}}}}()},94:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return d}));var a,u,i,c=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage;r(this,e),o(this,"engine",null),o(this,"get",(function(e){var n,r=t.engine.getItem(e);if(null==r)return null;try{n=JSON.parse(r)}catch(e){console.log(e),n=null}return n})),o(this,"set",(function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==e)t.engine.removeItem(n);else try{t.engine.setItem(n,JSON.stringify(e),r)}catch(e){console.log(e)}})),this.engine=n},s=n(190),l=n.n(s),f=n(280),h=n(61),p={getItem:l.a.get,setItem:l.a.set,removeItem:l.a.remove},d=(a=new c(p),u=[],{onChange:function(e){return u.push(e),function(){var t=u.indexOf(e);u.splice(t,1)}},clearAuthen:function(){i(null)},loadAuthen:function(){return new Promise((function(e,t){a.get("token")?f.a.auth().then((function(n){n?(n._id||i(null),h.a.setState(n).then((function(){return e()}))):t()})).catch((function(e){i(null)})):t()}))},getAuthen:function(){return a.get("token")},setAuthen:i=function(e,t){a.set(e,"token",t),Promise.all(u.map((function(t){return t(e)})))}})}},[[359,28,1,0,10,9,27,26,13,18,16,17,15,21,6,7,8,11,12,14,19,20,22,23,24,25]]]);